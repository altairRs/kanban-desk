<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Task Manager</title>

    <link rel="stylesheet" href="style.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css' rel='stylesheet' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #f4f4f9;
        }

        #container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 0;
        }

        header {
            max-width: 1200px;
            margin: 20px auto;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: #9381FF;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            margin: 0;
        }

        #task-section {
            margin-top: 30px;
        }

        form {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 20px;
        }

        input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            padding: 10px 15px;
            border: none;
            background: #007bff;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }

        #calendar {
            margin-top: 30px;
            max-width: 50%;
        }

        a {
            text-decoration: none;
        }
        body {
            background-color: #f8f9fa;
        }

        .board {
            display: flex;
            justify-content: space-between;
            padding: 20px;
        }

        .column {
            width: 30%;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .task {
            background: #e9ecef;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            cursor: grab;
        }

        .task-label {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: white;
        }

        .task[data-category="UI Design"] .task-label {
            background-color: #007bff;
        }

        .task[data-category="Illustration"] .task-label {
            background-color: #28a745;
        }

        .task[data-category="Copywriting"] .task-label {
            background-color: #ffc107;
        }

        .sidebar {
            width: 250px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 20px;
            right: 20px;
        }

        .progress {
            height: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .modal.show {
            display: block;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            margin-top: 10px;
        }
    </style>

    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
</head>
<body>
    <header>
        <h1>Task Manager</h1>
        <nav>
            <a href="#" id="pomodoro-btn">
                <span class="btn btn-primary">Pomodoro</span>
            </a>
            <a href="#" id="login-btn">
                <span class="btn btn-primary">Login</span>
            </a>
        </nav>
    </header>
    <div id="container">
        <div id="task-section">
            <form>
                <input type="text" placeholder="Category" aria-label="Category">
                <input type="text" placeholder="Short Description" aria-label="Short Description">
                <button type="submit">Add</button>
            </form>
        </div>

        <div id="calendar"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth'
            });
            calendar.render();
        });
    </script>

<div class="container-fluid">
    <h1 class="text-center my-4">Homepage Design</h1>
    <div class="d-flex justify-content-between">
        <div class="board">
            <div class="column" data-status="Task Ready">
                <h4>Task Ready</h4>
                <div class="task" draggable="true" data-category="Copywriting">
                    <span class="task-label">Copywriting</span>
                    <p>Check the company we copied doesnâ€™t think we copied them.</p>
                </div>
                <div class="task" draggable="true" data-category="Illustration">
                    <span class="task-label">Illustration</span>
                    <p>Send Advert illustrations over to the production company.</p>
                </div>
            </div>
            <div class="column" data-status="In Progress">
                <h4>In Progress</h4>
                <div class="task" draggable="true" data-category="UI Design">
                    <span class="task-label">UI Design</span>
                    <p>Replace lorem ipsum text in the final designs.</p>
                </div>
            </div>
            <div class="column" data-status="Done">
                <h4>Done</h4>
                <div class="task" draggable="true" data-category="Copywriting">
                    <span class="task-label">Copywriting</span>
                    <p>Konsep hero title yang menarik.</p>
                </div>
            </div>
        </div>
        <div class="sidebar">
            <h4>Task Progress</h4>
            <div class="mb-3">
                <span>Copywriting</span>
                <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="mb-3">
                <span>Illustration</span>
                <div class="progress">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="mb-3">
                <span>UI Design</span>
                <div class="progress">
                    <div class="progress-bar bg-primary" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="mb-3">
                <span>Overall Progress</span>
                <div class="progress">
                    <div class="progress-bar bg-info" id="overall-progress" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<button id="addTaskButton" class="btn btn-success m-3">Add Task</button>

<div class="modal" id="taskModal">
    <div class="modal-header">
        <h5>Edit Task</h5>
        <button id="closeModal">&times;</button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <label for="taskTitle">Task Title</label>
            <input type="text" id="taskTitle" class="form-control">
        </div>
        <div class="form-group">
            <label for="taskCategory">Category</label>
            <select id="taskCategory" class="form-control">
                <option value="Copywriting">Copywriting</option>
                <option value="Illustration">Illustration</option>
                <option value="UI Design">UI Design</option>
            </select>
        </div>
        <button id="saveTask" class="btn btn-primary">Save</button>
    </div>
</div>

<script>
    const tasks = document.querySelectorAll('.task');
    const columns = document.querySelectorAll('.column');
    const taskModal = document.getElementById('taskModal');
    const taskTitleInput = document.getElementById('taskTitle');
    const taskCategorySelect = document.getElementById('taskCategory');
    const saveTaskButton = document.getElementById('saveTask');
    const closeModalButton = document.getElementById('closeModal');
    const addTaskButton = document.getElementById('addTaskButton');
    let currentTask;

    tasks.forEach(task => {
        task.addEventListener('dragstart', () => {
            task.classList.add('dragging');
        });

        task.addEventListener('dragend', () => {
            task.classList.remove('dragging');
            updateProgress();
        });

        task.addEventListener('dblclick', () => {
            openTaskModal(task);
        });
    });

    columns.forEach(column => {
        column.addEventListener('dragover', e => {
            e.preventDefault();
            const afterElement = getDragAfterElement(column, e.clientY);
            const draggingTask = document.querySelector('.dragging');
            if (afterElement == null) {
                column.appendChild(draggingTask);
            } else {
                column.insertBefore(draggingTask, afterElement);
            }
        });
    });

    addTaskButton.addEventListener('click', () => {
        openTaskModal();
    });

    function getDragAfterElement(column, y) {
        const draggableElements = [...column.querySelectorAll('.task:not(.dragging)')];

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    function openTaskModal(task = null) {
        currentTask = task;
        if (task) {
            taskTitleInput.value = task.querySelector('p').innerText;
            taskCategorySelect.value = task.dataset.category;
        } else {
            taskTitleInput.value = '';
            taskCategorySelect.value = 'Copywriting';
        }
        taskModal.classList.add('show');
    }

    closeModalButton.addEventListener('click', () => {
        taskModal.classList.remove('show');
    });

    saveTaskButton.addEventListener('click', () => {
        if (currentTask) {
            currentTask.querySelector('p').innerText = taskTitleInput.value;
            currentTask.dataset.category = taskCategorySelect.value;
            currentTask.querySelector('.task-label').innerText = taskCategorySelect.value;
            currentTask.querySelector('.task-label').style.backgroundColor = getCategoryColor(taskCategorySelect.value);
        } else {
            const newTask = document.createElement('div');
            newTask.classList.add('task');
            newTask.draggable = true;
            newTask.dataset.category = taskCategorySelect.value;
            newTask.innerHTML = `
                <span class="task-label">${taskCategorySelect.value}</span>
                <p>${taskTitleInput.value}</p>
            `;
            newTask.addEventListener('dragstart', () => {
                newTask.classList.add('dragging');
            });
            newTask.addEventListener('dragend', () => {
                newTask.classList.remove('dragging');
                updateProgress();
            });
            newTask.addEventListener('dblclick', () => {
                openTaskModal(newTask);
            });
            document.querySelector('[data-status="Task Ready"]').appendChild(newTask);
            tasks.push(newTask);
        }
        taskModal.classList.remove('show');
        updateProgress();
    });

    function getCategoryColor(category) {
        switch (category) {
            case 'UI Design':
                return '#007bff';
            case 'Illustration':
                return '#28a745';
            case 'Copywriting':
                return '#ffc107';
        }
    }

    function updateProgress() {
        const totalTasks = tasks.length;
        const doneTasks = document.querySelector('[data-status="Done"]').childElementCount;
        const progressPercentage = (doneTasks / totalTasks) * 100;
        document.getElementById('overall-progress').style.width = progressPercentage + '%';
        document.getElementById('overall-progress').setAttribute('aria-valuenow', progressPercentage);
    }

    updateProgress();
</script>
</body>
</html>